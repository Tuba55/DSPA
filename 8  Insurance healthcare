# -*- coding: utf-8 -*-
"""dspa8.ipynb
#https://www.kaggle.com/datasets/mirichoi0218/insurance
Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1SrS4CW8BS0cuL4DRXfc_IHHlqvy9EEgH
"""

import numpy as np
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt

# Load the dataset
df = pd.read_csv('/content/insurance.csv')  # Import the CSV as a pandas dataframe

df.head()  # Show the first five rows

# Check for missing values
missing_values = df.isnull().sum().sort_values(ascending=False)
missing_values = missing_values[missing_values > 0] / df.shape[0]  # Normalize
print(f'{missing_values * 100} %')

from sklearn.preprocessing import LabelEncoder

# Convert string values to integers using the scikit-learn LabelEncoder
st = df.apply(LabelEncoder().fit_transform)
st.head()

# Correlation heatmap
sns.set(color_codes=True)
plt.figure(figsize=(14, 12))
sns.heatmap(st.astype(float).corr(),
            linewidths=0.2,
            square=True,
            linecolor='white',
            annot=True,
            cmap="YlGnBu")
plt.show()

# Distribution of charges for smokers and non-smokers
g = sns.FacetGrid(df, col="smoker", height=5, sharey=False, sharex=True)
g.map(sns.histplot, "charges", color='r')
g.set_axis_labels("charges", "proportion")
g.despine(left=True)

# Distribution of age
plt.figure(figsize=(13, 6))
plt.title("Distribution of Age")
ax = sns.histplot(df["age"], color='purple')

# Count plot of smokers by gender
sns.catplot(x="smoker", kind="count", hue='sex', data=df, palette='pastel')
plt.show()

# Scatter plot of age vs. charges for smokers and non-smokers
sns.lmplot(x="age", y="charges", hue="smoker", data=df, 
           palette=dict(yes="r", no="g"), height=7)
ax.set_title('Smokers and Non-smokers')
plt.show()
